# 报告 中文版

## 1.综述

## 2.数学建模

本项目的回测系统基于 `Backtrader` 框架构建，为了确保回测结果具有现实指导意义，我们在数学建模层面进行了严格的约束，力求还原真实的港股交易环境。

### 2.1 资金管理与仓位控制
*   **初始资金**：设定为 **100,000 HKD**。
*   **全仓交易模式**：考虑到资金量较小，为了最大化资金利用率，所有策略均采用**全仓买卖**（Full Position）模式。即当发出买入信号时，尝试使用 99% 的可用资金买入（预留 1% 用于支付手续费）；发出卖出信号时，清空所有持仓。
*   **现实考量**：对于小资金账户，分仓交易会导致单笔交易金额过小，从而使得固定费率（如平台费）占比过高，大幅拖累收益。全仓交易虽然波动较大，但在小资金阶段是更优的选择。

### 2.2 极度拟真的交易成本模型
港股的交易成本结构远比 A 股或美股复杂。为了避免“回测赚钱，实盘亏钱”的情况，我们重写了 Backtrader 的佣金模型 (`HKCommission`)，精确涵盖了以下所有费用：

1.  **印花税 (Stamp Duty)**：成交金额的 **0.1%**（双边收取）。
    *   *细节*：不足 1 HKD 按 1 HKD 收取，且向上取整。这是港股交易中最大的成本来源。
2.  **交易佣金 (Commission)**：成交金额的 **0.03%**。
    *   *细节*：最低收费 **3 HKD**。
3.  **平台使用费 (Platform Fee)**：固定 **15 HKD/笔**。
    *   *影响*：对于 10 万资金的全仓交易（约 400 股腾讯），这笔费用占比不大；但如果资金更小，这笔固定费用将显著提高盈亏平衡点。
4.  **监管征费**：
    *   交易费 (Trading Fee): 0.00565%
    *   证监会征费 (SFC Levy): 0.0027%
    *   财汇局征费 (FRC Levy): 0.00015%
    *   结算费 (Settlement Fee): 0.002% (最低 2 HKD, 最高 100 HKD)

**建模意义**：这种精细的费率模型能有效过滤掉那些因频繁交易而被手续费吞噬利润的“伪高频策略”。

### 2.3 市场微观结构与交易规则
*   **手数限制 (Lot Size)**：严格遵守港股“一手 100 股”的交易规则。
    *   我们自定义了 `HKStockBroker`，在下单时强制检查交易数量。如果计算出的买入数量为 150 股，系统会自动向下取整为 100 股，余下资金保留为现金。这真实反映了资金闲置（Cash Drag）带来的损耗。
*   **成交机制**：采用“次日开盘价（Open）”成交模式。
    *   策略在 T 日收盘后计算信号，指令在 T+1 日开盘瞬间执行。这完全避免了使用未来数据（Future Data）的作弊可能。

### 2.4 关于滑点 (Slippage) 的合理化假设
在本模型中，我们选择**忽略滑点**，理由如下：
1.  **流动性充裕**：回测标的为**腾讯控股 (00700.HK)**，其日均成交额通常在 50亿-100亿港币级别。
2.  **资金体量微小**：本策略资金仅为 10 万港币，相对于腾讯的盘口深度，属于“沧海一粟”。买入指令会瞬间被卖一档（Ask 1）消化，产生的冲击成本（Impact Cost）几乎为零。
3.  **价差覆盖**：腾讯的买卖价差（Spread）通常约为 0.05%，而我们计算的印花税高达 0.1%。在保守的费率模型下，忽略微小的价差滑点不会改变策略有效性的结论。

综上所述，本项目的数学建模在成本端极其严苛，在执行端符合交易所规则，是一个高度贴近现实的量化回测环境。

## 3.回测架构

## 4.交易策略

## 5.总结

## 6.环境配置

Python 3.12.5
所需要的包写入了根目录下的requirements.txt
